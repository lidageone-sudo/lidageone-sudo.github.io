<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>沉浸式阅读器</title>
  <meta name="description" content="本地 TXT / EPUB 沉浸式阅读器，支持中文编码自动识别" />
  <link rel="stylesheet" href="assets/css/reader.css" />
</head>
<body>
  <header class="top-bar">
    <div class="left-group">
      <label class="import-btn">导入文件<input type="file" id="fileInput" multiple accept=".txt,.epub" /></label>
      <select id="encodingSelect" title="文本编码">
        <option value="auto">自动编码</option>
        <option value="utf-8">UTF-8</option>
        <option value="gb18030">GB18030</option>
      </select>
      <span class="divider"></span>
      <button id="prevChapter" class="btn sm" title="上一章">◀</button>
      <select id="chapterSelect" class="chapter-select"></select>
      <button id="nextChapter" class="btn sm" title="下一章">▶</button>
      <span class="divider"></span>
      <button id="fontDec" class="btn sm">A-</button>
      <span class="font-ind" id="fontSizeInd">16</span>
      <button id="fontInc" class="btn sm">A+</button>
      <button id="resetPos" class="btn sm" title="回到顶部">↺</button>
    </div>
    <div class="right-group">
      <button id="themeSwitch" class="btn sm" title="切换主题">主题</button>
      <button id="toggleShelf" class="btn sm" aria-pressed="true">书架</button>
      <button id="toggleReader" class="btn sm" aria-pressed="false">阅读</button>
    </div>
  </header>
  <div id="loadBar" class="load-bar" hidden><div class="load-fill" id="loadFill"></div><span id="loadText" class="load-text"></span></div>
  <main class="main-area">
    <aside id="shelfView" class="shelf-pane active">
      <div class="shelf-scroll" id="shelfGrid"></div>
      <div class="hint">选择 txt / epub 文件（本地解析，不上传）。大文件分块读取可能需要时间。</div>
    </aside>
    <section id="readerView" class="reader-pane" hidden>
      <article id="pageContainer" class="page" tabindex="0"></article>
      <div class="progress-line"><div id="progressFill" class="progress-inner"></div></div>
    </section>
  </main>
  <script src="https://cdn.jsdelivr.net/npm/epubjs/dist/epub.min.js"></script>
  <script src="assets/js/reader.js" type="module"></script>
</body>
</html>
