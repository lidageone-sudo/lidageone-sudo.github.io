/* Immersive full-screen reader */
:root { --bg:#f6f6f4; --bg-alt:#ecebe7; --ink:#222; --accent:#2563eb; --accent-hover:#1d4ed8; --border:#d0d5dd; --radius:8px; --paper:#fff; }
[data-theme=dark]{ --bg:#0f1115; --bg-alt:#1b1f25; --ink:#e5e7eb; --accent:#3b82f6; --accent-hover:#60a5fa; --border:#2d333b; --paper:#181c21; }
[data-theme=sepia]{ --bg:#f4ecd9; --bg-alt:#ecdfc6; --ink:#352410; --paper:#fcf8ef; --accent:#b87333; --accent-hover:#c4813d; --border:#d4c2a4; }
html,body { height:100%; margin:0; font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; background:var(--bg); color:var(--ink); -webkit-font-smoothing:antialiased; }
body { display:flex; flex-direction:column; }
.top-bar { display:flex; justify-content:space-between; gap:.75rem; align-items:center; padding:.55rem .9rem; background:var(--bg-alt); border-bottom:1px solid var(--border); position:sticky; top:0; z-index:50; }
.left-group,.right-group { display:flex; align-items:center; gap:.5rem; }
.import-btn { position:relative; overflow:hidden; background:var(--paper); border:1px solid var(--border); padding:.45rem .9rem; border-radius:var(--radius); font-size:.8rem; cursor:pointer; font-weight:600; }
.import-btn input { position:absolute; inset:0; opacity:0; cursor:pointer; }
select { background:var(--paper); border:1px solid var(--border); border-radius:var(--radius); padding:.4rem .55rem; font-size:.75rem; color:inherit; }
.btn { background:var(--paper); border:1px solid var(--border); border-radius:var(--radius); padding:.4rem .7rem; font-size:.7rem; cursor:pointer; display:inline-flex; align-items:center; gap:.25rem; font-weight:500; }
.btn:hover { background:var(--bg-alt); }
.btn[aria-pressed=true] { background:var(--accent); color:#fff; border-color:var(--accent); }
.divider { width:1px; height:1.6rem; background:var(--border); }
.main-area { flex:1; display:flex; min-height:0; }
.shelf-pane { width:280px; border-right:1px solid var(--border); display:flex; flex-direction:column; background:var(--paper); }
.shelf-pane:not(.active) { display:none; }
.shelf-scroll { flex:1; overflow:auto; padding:.75rem; display:grid; grid-template-columns:repeat(auto-fill,minmax(100px,1fr)); gap:.75rem; align-content:start; }
.book-slot { background:var(--bg-alt); border:1px solid var(--border); border-radius:6px; padding:.5rem .45rem; font-size:.65rem; cursor:pointer; display:flex; flex-direction:column; gap:.25rem; box-shadow:0 1px 2px rgba(0,0,0,.08); }
.book-slot:hover { background:var(--paper); }
.book-slot .title { font-weight:600; line-height:1.2; }
.book-slot .fmt { opacity:.6; font-size:.55rem; }
.reader-pane { flex:1; position:relative; display:flex; flex-direction:column; min-width:0; }
.page { flex:1; overflow:auto; padding:2.2rem clamp(1.6rem,3vw,3.4rem); line-height:1.65; font-size:16px; font-family: 'Times New Roman',serif; background:var(--paper); scroll-behavior:smooth; }
.page p { margin:0 0 1em; text-indent:2em; }
.page h2,.page h3 { margin:1.8em 0 .9em; text-indent:0; line-height:1.3; }
.progress-line { height:4px; background:var(--bg-alt); width:100%; position:sticky; bottom:0; }
.progress-inner { height:100%; width:0; background:linear-gradient(90deg,var(--accent),var(--accent-hover)); }
.hint { padding:.75rem; font-size:.7rem; opacity:.7; border-top:1px solid var(--border); }
.font-ind { min-width:22px; text-align:center; font-size:.7rem; }
.load-bar { position:fixed; left:0; top:0; height:3px; width:100%; background:rgba(0,0,0,.08); z-index:80; }
.load-fill { height:100%; width:0; background:linear-gradient(90deg,var(--accent),var(--accent-hover)); transition:width .2s; }
.load-text { position:fixed; top:6px; right:10px; font-size:.65rem; background:var(--paper); padding:.25rem .5rem; border:1px solid var(--border); border-radius:6px; box-shadow:0 1px 2px rgba(0,0,0,.15); }
::-webkit-scrollbar { width:10px; }
::-webkit-scrollbar-thumb { background:var(--bg-alt); border-radius:6px; }
[data-theme=dark] ::-webkit-scrollbar-thumb { background:#2c3239; }
@media (max-width:900px){ .shelf-pane { display:none!important; } .top-bar { flex-wrap:wrap; } }
