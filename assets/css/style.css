/* AI 导航站 主样式 */
:root {
  --bg:#f6f7f9; --bg-alt:#eef0f3; --panel:#ffffff; --border:#d9dde3; --text:#1a1f29; --text-sec:#5a6475; --accent:#2563eb; --accent-hover:#1d4ed8; --radius:10px; --danger:#dc2626; --warn:#b45309; --ok:#059669; --shadow:0 4px 12px -2px rgba(0,0,0,.08),0 1px 3px rgba(0,0,0,.08);
  --code:#1e293b; --badge:#e3e8ef; --grad:linear-gradient(135deg,#2563eb,#9333ea);
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
}
[data-theme=dark]{
  --bg:#0f141b; --bg-alt:#161d27; --panel:#1e2530; --border:#2c3542; --text:#e5eaf1; --text-sec:#9aa4b1; --accent:#3b82f6; --accent-hover:#60a5fa; --badge:#2d3a49; --code:#f1f5f9; --shadow:0 4px 14px -3px rgba(0,0,0,.55),0 2px 4px rgba(0,0,0,.4);
}
* { box-sizing:border-box; }
html,body { margin:0; padding:0; background:var(--bg); color:var(--text); }
body { min-height:100vh; display:flex; flex-direction:column; }
::-webkit-scrollbar { width:12px; }
::-webkit-scrollbar-thumb { background:var(--border); border-radius:6px; }
[data-theme=dark] ::-webkit-scrollbar-thumb { background:#344556; }

.top-bar { position:sticky; top:0; z-index:50; display:flex; gap:1rem; padding:.75rem 1.2rem; align-items:center; backdrop-filter:blur(12px); background:rgba(255,255,255,.75); border-bottom:1px solid var(--border); }
[data-theme=dark] .top-bar { background:rgba(21,27,35,.8); }
.logo { font-weight:600; font-size:1rem; letter-spacing:.5px; display:flex; align-items:center; gap:.5rem; }
.logo .muted { font-weight:400; color:var(--text-sec); font-size:.75rem; }
.search-wrap { position:relative; flex:1; display:flex; }
.search-wrap input { flex:1; padding:.65rem .85rem; border:1px solid var(--border); border-radius:8px; background:var(--panel); color:inherit; font-size:.85rem; }
.search-wrap input:focus { outline:2px solid var(--accent); outline-offset:2px; }
#clearSearch { position:absolute; right:.35rem; top:50%; transform:translateY(-50%); border:none; background:transparent; cursor:pointer; color:var(--text-sec); font-size:.9rem; padding:.2rem .4rem; border-radius:6px; }
#clearSearch:hover { color:var(--accent); background:var(--bg-alt); }
.actions { display:flex; gap:.55rem; align-items:center; }
select, .btn { border:1px solid var(--border); background:var(--panel); color:inherit; padding:.55rem .75rem; border-radius:8px; font-size:.75rem; cursor:pointer; font-weight:500; display:inline-flex; align-items:center; gap:.3rem; }
.btn:hover, select:hover { background:var(--bg-alt); }
.btn:active { transform:translateY(1px); }

.tag-bar { display:flex; gap:.5rem; flex-wrap:wrap; padding:.55rem 1.2rem; border-bottom:1px solid var(--border); background:var(--bg-alt); }
.tag-bar .tag { padding:.35rem .7rem; font-size:.65rem; border-radius:20px; background:var(--badge); cursor:pointer; color:#334155; display:flex; align-items:center; gap:.3rem; }
[data-theme=dark] .tag-bar .tag { background:#2b3947; color:#cbd5e1; }
.tag.active { background:var(--accent); color:#fff; }

.content { width:100%; max-width:1600px; margin:0 auto; padding:1.2rem 1.4rem 4rem; display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:1.1rem; flex:1; }
body.compact .content { grid-template-columns:repeat(auto-fill,minmax(200px,1fr)); }

.card { background:var(--panel); border:1px solid var(--border); border-radius:var(--radius); padding:.9rem .95rem 1rem; display:flex; flex-direction:column; gap:.55rem; position:relative; box-shadow:var(--shadow); animation:fade .4s ease; }
.card:hover { border-color:var(--accent); box-shadow:0 0 0 1px var(--accent), var(--shadow); }
.card h3 { margin:.1rem 0 .15rem; font-size:.95rem; line-height:1.25; font-weight:600; cursor:pointer; }
.card .desc { margin:0; font-size:.68rem; line-height:1.35; color:var(--text-sec); height:2.7em; overflow:hidden; }
.card-head { display:flex; justify-content:space-between; align-items:center; gap:.4rem; }
.badge { background:var(--badge); padding:.25rem .5rem; border-radius:6px; font-size:.55rem; font-weight:600; letter-spacing:.5px; display:inline-flex; align-items:center; gap:.3rem; color:#334155; }
[data-theme=dark] .badge { background:#2d3a46; color:#d1d9e2; }
.badge-license { opacity:.8; }
.meta-line { font-size:.55rem; color:var(--text-sec); display:flex; gap:.6rem; flex-wrap:wrap; }
.tags { display:flex; flex-wrap:wrap; gap:.35rem; }
.tags .t { background:var(--bg-alt); border:1px solid var(--border); padding:.25rem .5rem; font-size:.55rem; border-radius:6px; cursor:pointer; }
.tags .t:hover { background:var(--panel); }
.btn-mini { background:var(--bg-alt); border:1px solid var(--border); font-size:.6rem; padding:.25rem .45rem; border-radius:6px; cursor:pointer; }
.btn-mini:hover { background:var(--panel); }
.btn-fav.faved { color:var(--accent); font-weight:700; }

.side-panel { position:fixed; top:0; right:-480px; width:480px; height:100%; background:var(--panel); box-shadow:-4px 0 14px -2px rgba(0,0,0,.25); border-left:1px solid var(--border); display:flex; flex-direction:column; transition:transform .4s cubic-bezier(.4,0,.2,1); z-index:120; padding:1.1rem 1.3rem 2rem; overflow:auto; }
.side-panel.active { transform:translateX(-480px); }
.close-panel { position:absolute; top:.6rem; right:.6rem; border:none; background:var(--bg-alt); color:var(--text-sec); padding:.35rem .55rem; border-radius:8px; cursor:pointer; }
.close-panel:hover { background:var(--accent); color:#fff; }
.overlay { position:fixed; inset:0; background:rgba(0,0,0,.35); backdrop-filter:blur(2px); z-index:100; }
.panel-body h2 { margin:0 0 .6rem; font-size:1.1rem; }
.panel-body p { font-size:.8rem; line-height:1.5; }
.panel-body .sec { margin:1.1rem 0 .75rem; font-size:.75rem; font-weight:600; text-transform:uppercase; letter-spacing:.5px; color:var(--text-sec); }
.panel-body .line { font-size:.65rem; display:flex; gap:.5rem; margin:.3rem 0; align-items:center; flex-wrap:wrap; }
.panel-body code { background:var(--bg-alt); padding:.15rem .4rem; border-radius:4px; font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace; font-size:.6rem; }
.links { display:flex; gap:.5rem; flex-wrap:wrap; }
.links a { font-size:.65rem; padding:.35rem .6rem; background:var(--bg-alt); border:1px solid var(--border); border-radius:6px; text-decoration:none; color:var(--text); }
.links a:hover { background:var(--accent); color:#fff; border-color:var(--accent); }
.fav-only-toggle { margin-left:auto; }

.site-footer { padding:1.2rem; text-align:center; font-size:.65rem; color:var(--text-sec); }
.site-footer a { color:var(--accent); text-decoration:none; }
.site-footer a:hover { text-decoration:underline; }

.empty { grid-column:1/-1; text-align:center; padding:4rem 1rem; font-size:.85rem; color:var(--text-sec); opacity:.8; }

@media (max-width:1100px){
  .side-panel { width:90%; right:-100%; }
  .side-panel.active { transform:translateX(-100%); }
}
@media (max-width:760px){
  .top-bar { flex-wrap:wrap; }
  .search-wrap { order:3; width:100%; }
  .actions { flex-wrap:wrap; }
  body.compact .content { grid-template-columns:repeat(auto-fill,minmax(160px,1fr)); }
}

@keyframes fade { from{opacity:0; transform:translateY(4px);} to{opacity:1; transform:translateY(0);} }*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif;line-height:1.5;-webkit-font-smoothing:antialiased}
body{background:var(--bg);color:var(--text);transition:background .3s,color .3s}
:root{--bg:#ffffff;--bg-alt:#f5f7fa;--text:#222;--border:#d9e1ec;--accent:#2563eb;--accent-hover:#1d4ed8;--radius:10px;--shadow:0 2px 6px -2px rgba(0,0,0,.15);--danger:#dc2626;--tag:#eef2f7}
[data-theme=dark]{--bg:#0f1115;--bg-alt:#181b21;--text:#e5e7eb;--border:#2a3039;--accent:#3b82f6;--accent-hover:#60a5fa;--tag:#1f242c}
a{color:var(--accent);text-decoration:none}a:hover{text-decoration:underline}
.site-header{display:flex;flex-wrap:wrap;gap:.75rem;align-items:center;padding:1rem 1.25rem;background:var(--bg-alt);border-bottom:1px solid var(--border);position:sticky;top:0;z-index:40}
.brand{display:flex;align-items:center;gap:.5rem}.brand h1{font-size:1.25rem;font-weight:600}
.logo{font-size:1.5rem}
.controls{display:flex;align-items:center;gap:.5rem;flex:1;min-width:260px}
.controls input[type=search]{flex:1;padding:.55rem .75rem;border:1px solid var(--border);border-radius:var(--radius);background:var(--bg);color:inherit;font-size:.9rem}
.controls select{padding:.55rem .6rem;border:1px solid var(--border);border-radius:var(--radius);background:var(--bg);color:inherit;font-size:.85rem}
.btn,.fav-btn,.close-btn{cursor:pointer;border:1px solid var(--border);background:var(--bg);color:inherit;min-height:2.1rem;padding:.4rem .75rem;border-radius:var(--radius);font-size:.8rem;display:inline-flex;align-items:center;gap:.35rem;line-height:1;font-weight:500}
.btn:hover,.fav-btn:hover,.close-btn:hover{background:var(--bg-alt)}
.btn[aria-pressed=true],.fav-btn.active{background:var(--accent);color:#fff;border-color:var(--accent)}
.btn:focus-visible,.fav-btn:focus-visible,.close-btn:focus-visible{outline:2px solid var(--accent);outline-offset:2px}
.tag-bar{display:flex;flex-wrap:wrap;gap:.5rem;padding:.6rem 1rem;border-bottom:1px solid var(--border);background:var(--bg);position:sticky;top:64px;z-index:30}
.tag{padding:.35rem .65rem;font-size:.7rem;border:1px solid var(--border);border-radius:999px;background:var(--tag);cursor:pointer;user-select:none;display:inline-flex;align-items:center;gap:.25rem}
.tag.active{background:var(--accent);border-color:var(--accent);color:#fff}
.layout{display:grid;grid-template-columns:1fr minmax(0,360px);gap:0}
@media (max-width:1000px){.layout{grid-template-columns:1fr}}
.book-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(210px,1fr));gap:1rem;padding:1rem;align-content:start}
.book-card{position:relative;display:flex;flex-direction:column;gap:.5rem;padding:.75rem;border:1px solid var(--border);border-radius:var(--radius);background:var(--bg-alt);box-shadow:var(--shadow);transition:transform .2s,box-shadow .2s}
.book-card:hover{transform:translateY(-3px);box-shadow:0 4px 14px -4px rgba(0,0,0,.25)}
.cover-wrapper{width:100%;aspect-ratio:3/4;background:linear-gradient(135deg,#cbd5e1,#94a3b8);border-radius:6px;overflow:hidden;display:flex;align-items:center;justify-content:center}
.cover{width:100%;height:100%;object-fit:cover;display:block}
.info{flex:1;display:flex;flex-direction:column;gap:.25rem}
.title{font-size:.95rem;line-height:1.25;font-weight:600;margin:0 0 .15rem}
.authors{font-size:.7rem;opacity:.85}
.meta{font-size:.6rem;opacity:.65}
.tags{display:flex;flex-wrap:wrap;gap:.25rem;margin-top:.35rem}
.tags .t{font-size:.55rem;padding:.15rem .45rem;background:var(--bg);border:1px solid var(--border);border-radius:6px;opacity:.8}
.fav-btn{position:absolute;top:.4rem;right:.4rem;padding:.3rem .45rem;font-size:.8rem}
.detail-panel{position:sticky;top:64px;align-self:start;height:calc(100vh - 64px);padding:1rem;border-left:1px solid var(--border);background:var(--bg);overflow:auto}
@media (max-width:1000px){.detail-panel{position:fixed;inset:0;top:0;height:100vh;border-left:none;z-index:100;box-shadow:0 0 0 999px rgba(0,0,0,.4);max-width:760px;margin:0 auto}}
.close-btn{position:absolute;top:.75rem;right:.75rem;border-radius:50%;width:2rem;height:2rem;justify-content:center}
.detail-panel.hidden{display:none}
.detail-content h2{font-size:1.2rem;margin-bottom:.4rem}
.detail-content .desc{font-size:.8rem;line-height:1.5;margin-top:.75rem;white-space:pre-wrap}
.actions{display:flex;flex-wrap:wrap;gap:.5rem;margin:.75rem 0 1rem}
.badges{display:flex;flex-wrap:wrap;gap:.35rem;margin-top:.5rem}
.badges .badge{background:var(--accent);color:#fff;padding:.25rem .55rem;font-size:.55rem;border-radius:6px}
.empty-hint{grid-column:1/-1;text-align:center;font-size:.9rem;padding:2rem 0;opacity:.7}
.site-footer{margin-top:1rem;padding:1.25rem 1rem;font-size:.65rem;text-align:center;opacity:.8;border-top:1px solid var(--border)}
/* Dark scrollbars */
[data-theme=dark] ::-webkit-scrollbar{width:10px}[data-theme=dark] ::-webkit-scrollbar-thumb{background:#2a3039;border-radius:6px}
/* Print */
@media print{.site-header,.tag-bar,.fav-btn,.close-btn,.actions,#detailPanel{display:none!important}.book-card{break-inside:avoid}body{background:#fff;color:#000}}
